<!DOCTYPE html>
<html>
<head>
<meta name="token-loader" content="width=device-width, initial-scale=1">

</head>
<body>
	<form id="post_token" name="post_token" action="@action@"
		method="post">
		<input type="hidden" id="token" name="token" value="@token@">
		<input type="hidden" id="login_id" name="login_id" value="@loginid@">
		<input type="hidden" id="publickey" name="publickey" value="@publickey@">
		<input type="hidden" id="algorithm" name="algorithm" value="@algorithm@">
		<input type="hidden" id="password" name="password" value="@password@">
	</form>
	<!--  
	<script src="@script@"></script>
	-->
	
	<script>
		function submitpage() {
			let action = document.getElementById("post_token").action;
			if(!action || action.toLowerCase().endsWith("/none") || action.toLowerCase().endsWith("/na")){
				action = null;
			}
			sessionStorage.setItem("token",
					document.getElementById("token").value);
			let url = sessionStorage.getItem("tmp-token-post-url");
			sessionStorage.removeItem("tmp-token-post-url");
			if (isEmpty(url) && isEmpty(action)) {
				startSpin();
			}else{
				if(!isEmpty(url)){
					document.getElementById("post_token").action = url;
				}
				document.forms['post_token'].submit();
			}
		}
		function isEmpty(str) {
		    return (!str || str.trim().length === 0 );
		}
		submitpage();	
	</script>
</body>
</html>
